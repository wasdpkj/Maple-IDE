

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Maple &mdash; Maple v0.0.12 Documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/round_logo_32x32.ico"/>
    <link rel="top" title="Maple v0.0.12 Documentation" href="../index.html" />
    <link rel="next" title="Maple RET6 Edition" href="maple-ret6.html" />
    <link rel="prev" title="USART" href="../usart.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="maple-ret6.html" title="Maple RET6 Edition"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="../usart.html" title="USART"
             accesskey="P">previous</a> |</li>
    <li><a href="http://leaflabs.com/">LeafLabs</a> |</li>
    
        <li><a href="../index.html">Index</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="maple">
<span id="id1"></span><h1>Maple<a class="headerlink" href="#maple" title="Permalink to this headline">¶</a></h1>
<p>This page is a general resource for information specific to the Maple.</p>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#technical-specifications" id="id6">Technical Specifications</a></li>
<li><a class="reference internal" href="#maple-identify-rev" id="id7">Identifying your Rev</a><ul>
<li><a class="reference internal" href="#rev-5" id="id8">Rev 5</a></li>
<li><a class="reference internal" href="#rev-3" id="id9">Rev 3</a></li>
<li><a class="reference internal" href="#rev-1" id="id10">Rev 1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#powering-the-maple" id="id11">Powering the Maple</a></li>
<li><a class="reference internal" href="#using-the-built-in-battery-charger" id="id12">Using the Built-in Battery Charger</a></li>
<li><a class="reference internal" href="#gpio-information" id="id13">GPIO Information</a><ul>
<li><a class="reference internal" href="#master-pin-map" id="id14">Master Pin Map</a></li>
<li><a class="reference internal" href="#gpio-port-pin-map" id="id15">GPIO Port Pin Map</a></li>
<li><a class="reference internal" href="#timer-pin-map" id="id16">Timer Pin Map</a></li>
<li><a class="reference internal" href="#exti-line-pin-map" id="id17">EXTI Line Pin Map</a></li>
<li><a class="reference internal" href="#usart-pin-map" id="id18">USART Pin Map</a></li>
<li><a class="reference internal" href="#low-noise-adc-pins" id="id19">Low-Noise ADC Pins</a></li>
</ul>
</li>
<li><a class="reference internal" href="#board-specific-values" id="id20">Board-Specific Values</a></li>
<li><a class="reference internal" href="#hardware-design-files" id="id21">Hardware Design Files</a></li>
<li><a class="reference internal" href="#failure-modes" id="id22">Failure Modes</a></li>
<li><a class="reference internal" href="#errata" id="id23">Errata</a><ul>
<li><a class="reference internal" href="#general" id="id24">General</a></li>
<li><a class="reference internal" href="#by-rev" id="id25">By Rev</a><ul>
<li><a class="reference internal" href="#id3" id="id26">Rev 5</a></li>
<li><a class="reference internal" href="#id4" id="id27">Rev 3</a></li>
<li><a class="reference internal" href="#id5" id="id28">Rev 1</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#recommended-reading" id="id29">Recommended Reading</a></li>
</ul>
</div>
<div class="section" id="technical-specifications">
<h2><a class="toc-backref" href="#id6">Technical Specifications</a><a class="headerlink" href="#technical-specifications" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>MCU: <a class="reference internal" href="#maple-stdocs"><em>STM32F103RBT6</em></a>, a 32-bit ARM Cortex M3
microprocessor</li>
<li>Clock Speed: <strong>72 MHz</strong></li>
<li><strong>128 KB Flash</strong> and <strong>20 KB SRAM</strong></li>
<li>43 <a class="reference internal" href="../gpio.html#gpio"><em>digital I/O pins (GPIOs)</em></a></li>
<li>15 <a class="reference internal" href="../pwm.html#pwm"><em>PWM</em></a> pins at 16 bit resolution</li>
<li>15 <a class="reference internal" href="../adc.html#adc"><em>analog input (ADC)</em></a> pins at 12-bit resolution</li>
<li>2 <a class="reference internal" href="../spi.html#spi"><em>SPI</em></a> peripherals</li>
<li>2 <a class="reference internal" href="../i2c.html#i2c"><em>I2C</em></a> peripherals</li>
<li>7 Channels of Direct Memory Access (<strong>DMA</strong>) (<a class="reference internal" href="../libmaple/api/dma.html#libmaple-dma"><em>dma.h</em></a>)</li>
<li>3 <a class="reference internal" href="../usart.html#usart"><em>USART (serial port)</em></a> peripherals</li>
<li>One advanced and three general-purpose <a class="reference internal" href="../timers.html#timers"><em>timers</em></a></li>
<li>Dedicated <a class="reference internal" href="../usb.html#usb"><em>USB</em></a> port for programming and communications</li>
<li><a class="reference internal" href="../jtag.html#jtag"><em>JTAG</em></a></li>
<li>Nested Vectored Interrupt Controller (NVIC) (including
<a class="reference internal" href="../external-interrupts.html#external-interrupts"><em>external interrupt</em></a> on GPIOs)</li>
<li>Supplies up to 500 mA at 3.3 V, with separate 250 mA digital and
analog regulators for low-noise analog performance</li>
<li><a class="reference internal" href="#maple-hardware"><em>Open source, four layer design</em></a></li>
<li>Support for low power, sleep, and standby modes (&lt;500 μA)</li>
<li>Operating Voltage: 3.3 V</li>
<li>Input Voltage (recommended): 4 V — 12 V</li>
<li>Dimensions: 2.05″ × 2.1″</li>
</ul>
</div>
<div class="section" id="maple-identify-rev">
<span id="identifying-your-rev"></span><h2><a class="toc-backref" href="#id7">Identifying your Rev</a><a class="headerlink" href="#maple-identify-rev" title="Permalink to this headline">¶</a></h2>
<p>We went through three versions (&#8220;Revs&#8221;) of the Maple hardware: Rev 1,
Rev 3, and Rev 5 <a class="footnote-reference" href="#frev2-4" id="id2">[1]</a>; Rev 5, the final design, is currently on
sale.  The following sections will help you to help you identify your
Rev.</p>
<div class="section" id="rev-5">
<h3><a class="toc-backref" href="#id8">Rev 5</a><a class="headerlink" href="#rev-5" title="Permalink to this headline">¶</a></h3>
<p>These boards went on sale in November 2010.  They have white buttons
and &#8220;r5&#8221; in small print near the &#8220;LeafLabs Maple&#8221; text next to the
&#8220;infinity leaf&#8221; logo.  The Maple Rev 5 repositioned the double header
on the right hand side to better fit 0.1 inch pitch breadboard.  This
necessitated the removal of pins 21 and 22 from the double header;
they are still available, but don&#8217;t have any headers installed on
them.</p>
<div class="figure align-center">
<img alt="Maple Rev 5" src="../_images/maple_rev51.png" />
</div>
</div>
<div class="section" id="rev-3">
<h3><a class="toc-backref" href="#id9">Rev 3</a><a class="headerlink" href="#rev-3" title="Permalink to this headline">¶</a></h3>
<p>This batch of boards went on sale beginning in May 2010. They have a
darker red silkscreen and the &#8220;infinity leaf&#8221; logo.  The Maple Rev 3
was the first version which includes the built-in button, labeled BUT.</p>
<div class="figure align-center">
<img alt="Maple Rev 3" src="../_images/maple_rev31.png" />
</div>
</div>
<div class="section" id="rev-1">
<h3><a class="toc-backref" href="#id10">Rev 1</a><a class="headerlink" href="#rev-1" title="Permalink to this headline">¶</a></h3>
<p>A small number of Maple Rev 1 boards went on sale in late 2009.  They
have a light red silkscreen and a single pixelated leaf as a logo.</p>
<div class="figure align-center">
<img alt="Maple Rev 1" src="../_images/maple_rev11.png" />
</div>
</div>
</div>
<div class="section" id="powering-the-maple">
<span id="maple-powering"></span><h2><a class="toc-backref" href="#id11">Powering the Maple</a><a class="headerlink" href="#powering-the-maple" title="Permalink to this headline">¶</a></h2>
<p>The Maple&#8217;s power source is determined by the header to the left of
the &#8220;LeafLabs&#8221; label on the silkscreen.  All versions of the Maple can
be powered from the barrel jack connector, USB, or a LiPo battery.  We
ship the Maple with a jumper on the USB selector.  In order to power
it off of an alternative source, unplug the Maple, then move the
jumper to the desired selector before reconnecting power.</p>
<p>You can also power the Maple via the pin labeled &#8220;Vin&#8221; on the lower
header.  This pin feeds into both the digital and analog voltage
regulators.  However, don&#8217;t do this while simultaneously powering the
board from another source, or you could damage it.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Silkscreens on Maples up through Rev 5s manufactured in
Spring 2011 falsely indicated that the barrel jack could be
supplied by up to 18 V.  We recommend a barrel jack input voltage
<strong>no greater than 12 V</strong>.</p>
<p>Rev5s manufactured after Spring 2011 may still have this error on
the silk, but it has been marked over.</p>
<p class="last">See <a class="reference internal" href="#maple-barrel-jack"><em>this erratum</em></a> for more information.</p>
</div>
</div>
<div class="section" id="using-the-built-in-battery-charger">
<h2><a class="toc-backref" href="#id12">Using the Built-in Battery Charger</a><a class="headerlink" href="#using-the-built-in-battery-charger" title="Permalink to this headline">¶</a></h2>
<p>Maples Rev 3 and Rev 5 also have a built-in LiPo battery charger.  In
order to use it, put a jumper across the CHRG header on the power
selection header and across the USB, or EXT selectors, depending on
whether you&#8217;re charging the battery via USB cable or barrel jack
connector.  The LED labeled CHRG will light up while the battery is
being charged.  When the battery is finished charging, the LED labeled
DONE will light up.</p>
</div>
<div class="section" id="gpio-information">
<span id="maple-gpios"></span><h2><a class="toc-backref" href="#id13">GPIO Information</a><a class="headerlink" href="#gpio-information" title="Permalink to this headline">¶</a></h2>
<p>The Maple features 38 ready-to-use general purpose input/output (see
<a class="reference internal" href="../gpio.html#gpio"><em>GPIO</em></a>) pins for digital input/output, numbered <tt class="docutils literal"><span class="pre">D0</span></tt> through
<tt class="docutils literal"><span class="pre">D37</span></tt>.  These numbers correspond to the numeric values next to each
header on the Maple silkscreen.</p>
<p id="maple-ret6-but">Pin <tt class="docutils literal"><span class="pre">D38</span></tt> is the board&#8217;s <a class="reference internal" href="../lang/api/board-values.html#lang-board-values-but"><em>button pin</em></a>.
It is thus mainly useful as an <a class="reference internal" href="../lang/api/constants.html#lang-pin-levels"><em>input</em></a>.  The
pin will <a class="reference internal" href="../lang/api/digitalread.html#lang-digitalread"><em>read</em></a> <tt class="docutils literal"><span class="pre">HIGH</span></tt> when the <a class="reference internal" href="../lang/api/isbuttonpressed.html#lang-isbuttonpressed"><em>button
is pressed</em></a>.</p>
<p>More GPIOs (numbered <tt class="docutils literal"><span class="pre">D39</span></tt>&#8211;<tt class="docutils literal"><span class="pre">D42</span></tt> on the back of the Maple&#8217;s
silkscreen) are available if you use the <a class="reference internal" href="../lang/api/disabledebugports.html#lang-disabledebugports"><em>disableDebugPorts()</em></a>
function; see the <a class="reference internal" href="../lang/api/board-values.html#lang-board-values-debug"><em>board-specific debug pin constants</em></a> for more information.  (See <a class="reference internal" href="#maple-nrst-pb4"><em>this
erratum</em></a> for information about the pin numbered
<tt class="docutils literal"><span class="pre">43</span></tt> on the silkscreen).</p>
<div class="section" id="master-pin-map">
<span id="maple-pin-map-master"></span><h3><a class="toc-backref" href="#id14">Master Pin Map</a><a class="headerlink" href="#master-pin-map" title="Permalink to this headline">¶</a></h3>
<p>This table shows a summary of the available functionality on every
GPIO pin, by peripheral type.  The &#8220;5 V?&#8221; column documents whether or
not the pin is <a class="reference internal" href="../gpio.html#gpio-5v-tolerant"><em>5 volt tolerant</em></a>.</p>
<p>Note that this table is not exhaustive; on some pins, more peripherals
are available than are listed here.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Pin</th>
<th class="head"><a class="reference internal" href="../gpio.html#gpio"><em>GPIO</em></a></th>
<th class="head"><a class="reference internal" href="../adc.html#adc"><em>ADC</em></a></th>
<th class="head"><a class="reference internal" href="../timers.html#timers"><em>Timer</em></a></th>
<th class="head"><a class="reference internal" href="../i2c.html#i2c"><em>I2C</em></a></th>
<th class="head"><a class="reference internal" href="../usart.html#usart"><em>UART</em></a></th>
<th class="head"><a class="reference internal" href="../spi.html#spi"><em>SPI</em></a></th>
<th class="head">5 V?</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>D0</td>
<td>PA3</td>
<td>CH3</td>
<td>2_CH4</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_RX</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D1</td>
<td>PA2</td>
<td>CH2</td>
<td>2_CH3</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_TX</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D2</td>
<td>PA0</td>
<td>CH0</td>
<td>2_CH1_ETR</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_CTS</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D3</td>
<td>PA1</td>
<td>CH1</td>
<td>2_CH2</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_RTS</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D4</td>
<td>PB5</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_SMBA</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D5</td>
<td>PB6</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>4_CH1</td>
<td>1_SCL</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D6</td>
<td>PA8</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_CH1</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_CK</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D7</td>
<td>PA9</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_CH2</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_TX</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D8</td>
<td>PA10</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_CH3</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_RX</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D9</td>
<td>PB7</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>4_CH2</td>
<td>1_SDA</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D10</td>
<td>PA4</td>
<td>CH4</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_CK</td>
<td>1_NSS</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D11</td>
<td>PA7</td>
<td>CH7</td>
<td>3_CH2</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_MOSI</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D12</td>
<td>PA6</td>
<td>CH6</td>
<td>3_CH1</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_MISO</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D13</td>
<td>PA5</td>
<td>CH5</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1_SCK</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D14</td>
<td>PB8</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>4_CH3</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D15</td>
<td>PC0</td>
<td>CH10</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D16</td>
<td>PC1</td>
<td>CH11</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D17</td>
<td>PC2</td>
<td>CH12</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D18</td>
<td>PC3</td>
<td>CH13</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D19</td>
<td>PC4</td>
<td>CH14</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D20</td>
<td>PC5</td>
<td>CH15</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D21</td>
<td>PC13</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D22</td>
<td>PC14</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D23</td>
<td>PC15</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D24</td>
<td>PB9</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>4_CH4</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D25</td>
<td>PD2</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>3_ETR</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D26</td>
<td>PC10</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D27</td>
<td>PB0</td>
<td>CH8</td>
<td>3_CH3</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D28</td>
<td>PB1</td>
<td>CH9</td>
<td>3_CH4</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>D29</td>
<td>PB10</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_SCL</td>
<td>3_TX</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D30</td>
<td>PB11</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_SDA</td>
<td>3_RX</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D31</td>
<td>PB12</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_SMBA</td>
<td>3_CK</td>
<td>2_NSS</td>
<td>Yes</td>
</tr>
<tr><td>D32</td>
<td>PB13</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>3_CTS</td>
<td>2_SCK</td>
<td>Yes</td>
</tr>
<tr><td>D33</td>
<td>PB14</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>3_RTS</td>
<td>2_MISO</td>
<td>Yes</td>
</tr>
<tr><td>D34</td>
<td>PB15</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2_MOSI</td>
<td>Yes</td>
</tr>
<tr><td>D35</td>
<td>PC6</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D36</td>
<td>PC7</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D37</td>
<td>PC8</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D38</td>
<td>PC9</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D39</td>
<td>PA13</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D40</td>
<td>PA14</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D41</td>
<td>PA15</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
<tr><td>D42</td>
<td>PB3</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="gpio-port-pin-map">
<span id="maple-gpio-port-map"></span><h3><a class="toc-backref" href="#id15">GPIO Port Pin Map</a><a class="headerlink" href="#gpio-port-pin-map" title="Permalink to this headline">¶</a></h3>
<p>The following table shows what pins are associated with each
<a class="reference internal" href="../gpio.html#gpio-ports"><em>GPIO port</em></a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">GPIOA</th>
<th class="head">GPIOB</th>
<th class="head">GPIOC</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>PA0: D2</td>
<td>PB0:  D27</td>
<td>PC0: D15</td>
</tr>
<tr><td>PA1: D3</td>
<td>PB1:  D28</td>
<td>PC1: D16</td>
</tr>
<tr><td>PA2: D1</td>
<td>PB2:  -</td>
<td>PC2: D17</td>
</tr>
<tr><td>PA3: D0</td>
<td>PB3:  D42</td>
<td>PC3: D18</td>
</tr>
<tr><td>PA4: D10</td>
<td>PB4:  D43</td>
<td>PC4: D19</td>
</tr>
<tr><td>PA5: D13</td>
<td>PB5:  D4</td>
<td>PC5: D20</td>
</tr>
<tr><td>PA6: D12</td>
<td>PB6:  D5</td>
<td>PC6: D35</td>
</tr>
<tr><td>PA7: D11</td>
<td>PB7:  D9</td>
<td>PC7: D36</td>
</tr>
<tr><td>PA8: D6</td>
<td>PB8:  D14</td>
<td>PC8: D37</td>
</tr>
<tr><td>PA9: D7</td>
<td>PB9:  D24</td>
<td>PC9: D38</td>
</tr>
<tr><td>PA10: D8</td>
<td>PB10: D29</td>
<td>PC10: D26</td>
</tr>
<tr><td>PA11: -</td>
<td>PB11: D30</td>
<td>PC11: -</td>
</tr>
<tr><td>PA12: -</td>
<td>PB12: D31</td>
<td>PC12: -</td>
</tr>
<tr><td>PA13: D39</td>
<td>PB13: D32</td>
<td>PC13: D21</td>
</tr>
<tr><td>PA14: D40</td>
<td>PB14: D33</td>
<td>PC14: D22</td>
</tr>
<tr><td>PA15: D41</td>
<td>PB15: D34</td>
<td>PC15: D23</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="timer-pin-map">
<span id="maple-timer-map"></span><h3><a class="toc-backref" href="#id16">Timer Pin Map</a><a class="headerlink" href="#timer-pin-map" title="Permalink to this headline">¶</a></h3>
<p>The following table shows what pins are associated with a particular
timer&#8217;s capture/compare channels.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Timer</th>
<th class="head">Ch. 1</th>
<th class="head">Ch. 2</th>
<th class="head">Ch. 3</th>
<th class="head">Ch. 4</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>D6</td>
<td>D7</td>
<td>D8</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td>2</td>
<td>D2</td>
<td>D3</td>
<td>D1</td>
<td>D0</td>
</tr>
<tr><td>3</td>
<td>D12</td>
<td>D11</td>
<td>D27</td>
<td>D28</td>
</tr>
<tr><td>4</td>
<td>D5</td>
<td>D9</td>
<td>D14</td>
<td>D24</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="exti-line-pin-map">
<span id="maple-exti-map"></span><h3><a class="toc-backref" href="#id17">EXTI Line Pin Map</a><a class="headerlink" href="#exti-line-pin-map" title="Permalink to this headline">¶</a></h3>
<p>The following table shows which pins connect to which <a class="reference internal" href="../external-interrupts.html#external-interrupts-exti-line"><em>EXTI lines</em></a> on the Maple.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">EXTI Line</th>
<th class="head">Pins</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>EXTI0</td>
<td>D2, D15, D27</td>
</tr>
<tr><td>EXTI1</td>
<td>D3, D16, D28</td>
</tr>
<tr><td>EXTI2</td>
<td>D1, D17, D25</td>
</tr>
<tr><td>EXTI3</td>
<td>D0, D18, D42</td>
</tr>
<tr><td>EXTI4</td>
<td>D10, D19</td>
</tr>
<tr><td>EXTI5</td>
<td>D4, D13, D20</td>
</tr>
<tr><td>EXTI6</td>
<td>D5, D12, D35</td>
</tr>
<tr><td>EXTI7</td>
<td>D9, D11, D36</td>
</tr>
<tr><td>EXTI8</td>
<td>D6, D14, D37</td>
</tr>
<tr><td>EXTI9</td>
<td>D7, D25, D28</td>
</tr>
<tr><td>EXTI10</td>
<td>D8, D26, D29</td>
</tr>
<tr><td>EXTI11</td>
<td>D30</td>
</tr>
<tr><td>EXTI12</td>
<td>D31</td>
</tr>
<tr><td>EXTI13</td>
<td>D21, D32, D39</td>
</tr>
<tr><td>EXTI14</td>
<td>D22, D33, D40</td>
</tr>
<tr><td>EXTI15</td>
<td>D23, D34, D41</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="usart-pin-map">
<span id="maple-usart-map"></span><h3><a class="toc-backref" href="#id18">USART Pin Map</a><a class="headerlink" href="#usart-pin-map" title="Permalink to this headline">¶</a></h3>
<p>The Maple has three serial ports (also known as <a class="reference internal" href="../usart.html#usart"><em>USARTs</em></a>): <tt class="docutils literal"><span class="pre">Serial1</span></tt>, <tt class="docutils literal"><span class="pre">Serial2</span></tt>, and <tt class="docutils literal"><span class="pre">Serial3</span></tt>. They communicate
using the pins given in the following table.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Serial Port</th>
<th class="head">TX</th>
<th class="head">RX</th>
<th class="head">CK</th>
<th class="head">CTS</th>
<th class="head">RTS</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">Serial1</span></tt></td>
<td>D7</td>
<td>D8</td>
<td>D6</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">Serial2</span></tt></td>
<td>D1</td>
<td>D0</td>
<td>D10</td>
<td>D2</td>
<td>D3</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">Serial3</span></tt></td>
<td>D29</td>
<td>D30</td>
<td>D31</td>
<td>D32</td>
<td>D33</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="low-noise-adc-pins">
<span id="maple-adc-bank"></span><h3><a class="toc-backref" href="#id19">Low-Noise ADC Pins</a><a class="headerlink" href="#low-noise-adc-pins" title="Permalink to this headline">¶</a></h3>
<p>The six pins at the bottom right of the board (D15—D20) generally
offer lower-noise ADC performance than other pins on the board. If
you’re concerned about getting good ADC readings, we recommend using
one of these pins to take your measurements.</p>
<p>Maple has an electrically isolated analog power plane with its own
regulator, and a geometrically isolated ground plane. Pins D15—D20 are
laid out to correspond with these analog planes, and our measurements
indicate that they generally have the lowest noise of all the analog
lines.  However, analog performance may vary depending upon the
activity of the other GPIOs.  Consult the <a class="reference internal" href="#maple-hardware"><em>Maple hardware design
files</em></a> for more details.</p>
</div>
</div>
<div class="section" id="board-specific-values">
<h2><a class="toc-backref" href="#id20">Board-Specific Values</a><a class="headerlink" href="#board-specific-values" title="Permalink to this headline">¶</a></h2>
<p>This section lists the Maple&#8217;s <a class="reference internal" href="../lang/api/board-values.html#lang-board-values"><em>board-specific values</em></a>.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">CYCLES_PER_MICROSECOND</span></tt>: 72</li>
<li><tt class="docutils literal"><span class="pre">BOARD_BUTTON_PIN</span></tt>: 38</li>
<li><tt class="docutils literal"><span class="pre">BOARD_LED_PIN</span></tt>: 13</li>
<li><tt class="docutils literal"><span class="pre">BOARD_NR_GPIO_PINS</span></tt>: 44 (however, <a class="reference internal" href="#maple-nrst-pb4"><em>pin D43 is not usable</em></a>)</li>
<li><tt class="docutils literal"><span class="pre">BOARD_NR_PWM_PINS</span></tt>: 15</li>
<li><tt class="docutils literal"><span class="pre">boardPWMPins</span></tt>: 0, 1, 2, 3, 5, 6, 7, 8, 9, 11, 12, 14, 24, 27, 28</li>
<li><tt class="docutils literal"><span class="pre">BOARD_NR_ADC_PINS</span></tt>: 15</li>
<li><tt class="docutils literal"><span class="pre">boardADCPins</span></tt>: 0, 1, 2, 3, 10, 11, 12, 15, 16, 17, 18, 19, 20, 27, 28</li>
<li><tt class="docutils literal"><span class="pre">BOARD_NR_USED_PINS</span></tt>: 7</li>
<li><tt class="docutils literal"><span class="pre">boardUsedPins</span></tt>: <tt class="docutils literal"><span class="pre">BOARD_LED_PIN</span></tt>, <tt class="docutils literal"><span class="pre">BOARD_BUTTON_PIN</span></tt>,
<tt class="docutils literal"><span class="pre">BOARD_JTMS_SWDIO_PIN</span></tt>, <tt class="docutils literal"><span class="pre">BOARD_JTCK_SWCLK_PIN</span></tt>,
<tt class="docutils literal"><span class="pre">BOARD_JTDI_PIN</span></tt>, <tt class="docutils literal"><span class="pre">BOARD_JTDO_PIN</span></tt>, <tt class="docutils literal"><span class="pre">BOARD_NJTRST_PIN</span></tt></li>
<li><tt class="docutils literal"><span class="pre">BOARD_NR_USARTS</span></tt>: 3</li>
<li><tt class="docutils literal"><span class="pre">BOARD_USART1_TX_PIN</span></tt>: 7</li>
<li><tt class="docutils literal"><span class="pre">BOARD_USART1_RX_PIN</span></tt>: 8</li>
<li><tt class="docutils literal"><span class="pre">BOARD_USART2_TX_PIN</span></tt>: 1</li>
<li><tt class="docutils literal"><span class="pre">BOARD_USART2_RX_PIN</span></tt>: 0</li>
<li><tt class="docutils literal"><span class="pre">BOARD_USART3_TX_PIN</span></tt>: 29</li>
<li><tt class="docutils literal"><span class="pre">BOARD_USART3_RX_PIN</span></tt>: 30</li>
<li><tt class="docutils literal"><span class="pre">BOARD_NR_SPI</span></tt>: 2</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI1_NSS_PIN</span></tt>: 10</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI1_MOSI_PIN</span></tt>: 11</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI1_MISO_PIN</span></tt>: 12</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI1_SCK_PIN</span></tt>: 13</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI2_NSS_PIN</span></tt>: 31</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI2_MOSI_PIN</span></tt>: 34</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI2_MISO_PIN</span></tt>: 33</li>
<li><tt class="docutils literal"><span class="pre">BOARD_SPI2_SCK_PIN</span></tt>: 32</li>
<li><tt class="docutils literal"><span class="pre">BOARD_JTMS_SWDIO_PIN</span></tt>: 39</li>
<li><tt class="docutils literal"><span class="pre">BOARD_JTCK_SWCLK_PIN</span></tt>: 40</li>
<li><tt class="docutils literal"><span class="pre">BOARD_JTDI_PIN</span></tt>: 41</li>
<li><tt class="docutils literal"><span class="pre">BOARD_JTDO_PIN</span></tt>: 42</li>
<li><tt class="docutils literal"><span class="pre">BOARD_NJTRST_PIN</span></tt>: <a class="reference internal" href="#maple-nrst-pb4"><em>43</em></a></li>
</ul>
</div>
<div class="section" id="hardware-design-files">
<span id="maple-hardware"></span><h2><a class="toc-backref" href="#id21">Hardware Design Files</a><a class="headerlink" href="#hardware-design-files" title="Permalink to this headline">¶</a></h2>
<p>The hardware schematics and board layout files are available in the
<a class="reference external" href="https://github.com/leaflabs/maple">Maple GitHub repository</a>.  The
design files for Rev 1, Rev 3, and Rev 5 are respectively in the
<tt class="docutils literal"><span class="pre">maple-r1</span></tt>, <tt class="docutils literal"><span class="pre">maple-r3</span></tt>, and <tt class="docutils literal"><span class="pre">maple-r5</span></tt> subdirectories.  A
schematic for a JTAG adapter suitable for use with Maple is available
in the <tt class="docutils literal"><span class="pre">jtagadapter</span></tt> directory.</p>
<p>From the GitHub repository main page, you can download the entire
repository by clicking the &#8220;Download&#8221; button.  If you are familiar
with <a class="reference external" href="http://git-scm.com/">Git</a>, you can also clone the repository
at the command line with</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>git clone git://github.com/leaflabs/maple.git
</pre></div>
</div>
</div>
<div class="section" id="failure-modes">
<span id="maple-failure-modes"></span><h2><a class="toc-backref" href="#id22">Failure Modes</a><a class="headerlink" href="#failure-modes" title="Permalink to this headline">¶</a></h2>
<p>The following are known failure modes.  The failure modes aren&#8217;t
design errors, but are easy ways to break or damage your board
permanently.</p>
<ul class="simple">
<li><strong>High voltage on non-tolerant pins</strong>: not all header pins are 5V
compatible; so e.g. connecting certain serial devices in the wrong
way could over-voltage the pins.  The <a class="reference internal" href="#maple-pin-map-master"><em>pin-mapping master table</em></a> details which pins are <a class="reference internal" href="../gpio.html#gpio-5v-tolerant"><em>5 V tolerant</em></a>.</li>
</ul>
</div>
<div class="section" id="errata">
<h2><a class="toc-backref" href="#id23">Errata</a><a class="headerlink" href="#errata" title="Permalink to this headline">¶</a></h2>
<p>This section documents design flaws and other errors.</p>
<div class="section" id="general">
<h3><a class="toc-backref" href="#id24">General</a><a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<ul id="maple-barrel-jack">
<li><p class="first"><strong>Barrel jack power supply voltage mistake</strong>: The acceptable voltage
range given next to the barrel jack on the Maple through Rev 5s
manufactured in Spring 2011 is <strong>incorrect</strong>.  The given range is 7
V — 18 V.  In fact, <strong>18 V is too high</strong> and should not be supplied
to your board.  The recommended maximum voltage you should apply is
<strong>12 V</strong>.</p>
<p>The original voltage regulators used on the Maple were rated up to
18 V.  However, the voltage regulators on current Maple Revs are
rated up to 16 V.  Our tests indicate that they operate correctly
through 12 V.  We do not recommend higher input voltages.</p>
</li>
</ul>
<ul class="simple" id="maple-nrst-pb4">
<li><strong>Reset and PB4 tied together</strong>: The Maple&#8217;s reset line is also
connected to PB4, which is labeled on the silkscreen as pin 43.
Thus, attempting to use pin 43 as a GPIO can reset your board.  This
has other implications.  Since PB4 is also the JTAG NJTRST line,
this prevents the <a class="reference internal" href="../jtag.html#jtag"><em>JTAG</em></a> &#8220;reset halt&#8221; command from
working properly.</li>
</ul>
<ul class="simple" id="maple-power-supply">
<li><strong>Power supply marketing mistake</strong>: We originally sold the Maple
advertising that it was capable of supplying up to 800 mA; the
correct value is 500 mA.</li>
</ul>
<ul class="simple" id="maple-pwm-marketing">
<li><strong>PWM marketing mistake</strong>: We originally advertised the Maple as
having 22 PWM-capable pins; the correct number is 15.</li>
</ul>
<ul class="simple" id="maple-adc-marketing">
<li><strong>ADC marketing mistake</strong>: We originally advertised the Maple as
having 16 analog input pins.  Due to <a class="reference internal" href="#maple-adc-led"><em>the following issue</em></a>, the correct number is 15.</li>
</ul>
<ul class="simple" id="maple-adc-led">
<li><strong>ADC on BOARD_LED_PIN</strong>: We originally sold the Maple RET6 Edition
advertising 16 analog input lines.  However, one of them (the one on
pin 13) is also connected to the built-in LED.  The voltage drop
across the LED means that the analog to digital converter on that
pin is not really useful.  While it is still usable, its readings
will be incorrect.</li>
</ul>
</div>
<div class="section" id="by-rev">
<h3><a class="toc-backref" href="#id25">By Rev</a><a class="headerlink" href="#by-rev" title="Permalink to this headline">¶</a></h3>
<p>The following subsections lists known issues and warnings for each
revision of the Maple board.</p>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id26">Rev 5</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>Pin 3 AIN missing</strong>: Pin 3 is capable of analog input, but on Rev
5s manufactured during Fall 2010, the corresponding &#8220;AIN&#8221; is missing
from its silkscreen.  This mistake was fixed in later manufacturing
runs.</li>
</ul>
</div>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id27">Rev 3</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>Pin 3 AIN missing</strong>: Pin 3 is capable of analog input, but the
corresponding &#8220;AIN&#8221; is missing from the Rev 3 silkscreen.</li>
</ul>
<ul id="maple-rev3-bad-buttons">
<li><p class="first"><strong>Bad/Sticky Buttons</strong>: a number of Rev 3 boards sold in May-June 2010
have questionable RESET and BUT buttons.</p>
<p>What seems to have happened is that the flux remover we used to
clean the boards before shipping eroded the plastic internals, which
resulted in intermittent functionality. All buttons on all shipped
boards did function in testing, but some may have been unreliable in
regular use.</p>
<p>If you have this problem, we will be happy to ship you new buttons
if you think you can re-solder them yourself, or you can ship us
your board and we will swap out that part.</p>
<p>For reference, the button part number is KMR211GLFS and the flux
remover we used is &#8220;Precision Electronics Cleaner&#8221; from RadioShack,
which is &#8220;Safe on most plastics&#8221; and contains: dipropylene glycol
monomethyl ether, hydrotreated heavy naphtha, dipropylene glycol
methyl ether acetate (say that three times fast!), and carbon
dioxide.</p>
</li>
<li><p class="first"><strong>Resistors on pins 0 and 1</strong>: these header pins, which are RX/TX on
USART2 (<a class="reference internal" href="../lang/api/serial.html#lang-serial"><em>Serial2</em></a>), have resistors in-line
between the STM32 and the headers. These resistors increase the
impedance of the lines for ADC reads and affect the open drain GPIO
functionality of the pins.</p>
<p>These resistors were accidentally copied over from older Arduino USB
designs, where they appear to protect the USB-Serial converter from
TTL voltage on the headers.</p>
</li>
<li><p class="first"><strong>Silkscreen Errors</strong>: the silkscreen on the bottom indicated PWM
functionality on pin 25 and listen the external header GND pin as
number 38 (actually 38 is connected to the BUT button). We manually
sharpied over both of these mistakes.</p>
</li>
</ul>
</div>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#id28">Rev 1</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><strong>ADC noise</strong>: generally very high, in particular when the USB port
is being used for communications (including keep-alive pings when
connected to a computer).</p>
<p>This issue was resolved in Rev 3 with a 4-layer design and a
<a class="reference internal" href="#maple-adc-bank"><em>geometrically isolated ADC Vref plane</em></a>.</p>
</li>
<li><p class="first"><strong>Resistors on pins 0 and 1</strong>: these header pins, which are RX/TX on
USART2 (<a class="reference internal" href="../lang/api/serial.html#lang-serial"><em>Serial2</em></a>), have resistors in-line
between the STM32 and the headers. These resistors increase the
impedance of the lines for ADC reads and affect the open drain GPIO
functionality of the pins.</p>
<p>These resistors were accidentally copied over from older Arduino USB
designs, where they appear to protect the USB-Serial converter from
TTL voltage on the headers.</p>
</li>
<li><p class="first"><strong>Silkscreen Differences</strong>: the pin numbering scheme on Rev 1 is
different from Rev 3, and thus Rev 3 software is difficult to use
with Rev 1 boards. Notably, the analog input bank is labeled A0-A4
on Rev 1 but 15-20 on Rev 3, and the extra header bank does not have
a pinout table on the bottom.</p>
</li>
<li><p class="first"><strong>No BUT Button</strong>: the BUT button, useful for serial bootloading,
was only added in Rev 3. As a workaround, you can directly short the
appropriate MCU pin to Vcc; see <a class="reference external" href="http://forums.leaflabs.com/topic.php?id=32#post-126">this forum posting</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="recommended-reading">
<h2><a class="toc-backref" href="#id29">Recommended Reading</a><a class="headerlink" href="#recommended-reading" title="Permalink to this headline">¶</a></h2>
<p id="maple-stdocs">STMicro documentation for STM32F103RB microcontroller:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/DATASHEET/CD00161566.pdf">Datasheet</a>
(PDF); covers STM32F103x8, STM32F103xB.</li>
<li><a class="reference external" href="http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/REFERENCE_MANUAL/CD00171190.pdf">Reference Manual RM0008</a>
(PDF); definitive resource for peripherals on the STM32F1 line.</li>
<li><a class="reference external" href="http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/PROGRAMMING_MANUAL/CD00228163.pdf">Programming Manual PM0056</a>
(PDF); assembly language and register reference.</li>
<li><a class="reference external" href="http://www.st.com/internet/mcu/product/164487.jsp">STM32F103RB</a>
overview page with links to further references.</li>
</ul>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="frev2-4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>Revs 2 and 4 were prototypes that didn&#8217;t pass internal
testing.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/round_logo_60x60.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../maple-quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maple-ide-install.html">IDE Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide.html">IDE Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix-toolchain.html">Command-Line Toolchain</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arduino-compatibility.html">Arduino Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libmaple.html"><tt class="docutils literal"><span class="pre">libmaple</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../bootloader.html">Bootloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm-gcc.html">GCC and libc for Maple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language-index.html">Language Index</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adc.html">ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external-interrupts.html">External Interrupts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fsmc.html">FSMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpio.html">GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jtag.html">JTAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pwm.html">PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi.html">SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers.html">Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systick.html">SysTick</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb.html">USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usart.html">USART</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Maple</a></li>
<li class="toctree-l1"><a class="reference internal" href="maple-ret6.html">Maple RET6 Edition</a></li>
<li class="toctree-l1"><a class="reference internal" href="maple-mini.html">Maple Mini</a></li>
<li class="toctree-l1"><a class="reference internal" href="maple-native-beta.html">Maple Native β</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="maple-ret6.html" title="Maple RET6 Edition"
             >next</a></li>
        <li class="right" >
          <a href="../usart.html" title="USART"
             >previous</a> |</li>
    <li><a href="http://leaflabs.com/">LeafLabs</a> |</li>
    
        <li><a href="../index.html">Index</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, 2011, LeafLabs, LLC.
      Last updated on Sep 13, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>